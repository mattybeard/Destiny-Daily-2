@model DestinyDaily2.Controllers.PrisonModel

@{
    ViewBag.Title = "Prison Of Elders";
}

@if (Model.Challenge != null)
{    
    <div style="text-align: center; width: 100%;">
        <h1 style="margin-top: 0px;">Challenge Of Elders</h1>
        <table class="table table-striped table-hover table-bordered" style="width: 70%; margin: 0 auto;">
            <thead></thead>
            <tbody>
            @foreach (var level in Model.Challenge.Rounds)
            {
                <tr>
                    <td colspan="3" style="font-size: 20px;">@level.Combatant.name.Replace("''", "'")</td>
                </tr>
            }
            <tr></tr>
            <tr>
                <td><b>Score Modifier</b></td>
                <td><img src="@string.Format("/Content/Images/Modifiers/{0}.png", @Model.Challenge.ScoreModifiers.First().ScoreModifier.name.Replace(" ", "").ToLower())"/></td>
                <td></td>
            </tr>
            <tr>
                <td><b>Difficulty Modifier 1</b></td>
                <td><img src="@string.Format("/Content/Images/Modifiers/{0}.png", @Model.Challenge.Modifiers.First().Modifier.name.Replace(" ", "").ToLower())"/></td>
                <td>@Model.Challenge.Modifiers.First().Modifier.name</td>
            </tr>
            <tr>
                <td><b>Difficulty Modifier 2</b></td>
                <td><img src="@string.Format("/Content/Images/Modifiers/{0}.png", @Model.Challenge.Modifiers.Skip(1).Take(1).First().Modifier.name.Replace(" ", "").ToLower())"/></td>
                <td>@Model.Challenge.Modifiers.Skip(1).Take(1).First().Modifier.name</td>
            </tr>
            </tbody>
        </table>
    </div>
    <br/>
    <br/>
}

@if (Model.Legacy.Any())
{    
    <h1 style="text-align: center;">Legacy Prison Of Elders</h1>

    foreach (var prison in Model.Legacy)
     {
         var currentRound = 1;
         <div style="text-align: center; width: 100%;">
             <h3 style="margin-top: 0px;">@prison.ManifestActivity.name.Replace("''", "'")</h3>
             <br/>
             <h4 style="width: 100%;">
                 @prison.ManifestActivity.desc
             </h4>
             <table class="table table-striped table-hover table-bordered table-poe" style="width: 70%; margin: 0 auto;">
                 <thead>
                 <tr>
                     <th>Round</th>
                     <th>Race</th>
                     <th>Modifiers</th>
                 </tr>
                 </thead>
                 <tbody>
                 @foreach (var round in prison.Rounds)
                 {
                     <tr>
                         <td>Round @(currentRound++)</td>
                         <td>@round.Races.First().Race.name</td>
                         <td>
                             <table style="width: 100%; margin: 0 auto;">
                                 @foreach (var modifier in round.Modifiers)
                                 {
                                     <tr>
                                         @*<td style="width: 40%"><img src="@String.Format("/Content/Images/Modifiers/{0}.png", modifier.modifier.name.ToLower().Replace(" ", ""))"></td>*@
                                         <td style="border-top: none;">@modifier.Modifier.name</td>
                                     </tr>
                                 }
                             </table>
                         </td>
                     </tr>
                 }
                 </tbody>
             </table>
             <br/><br/>
         </div>
     }
}